<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Federation Sun 2025</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon"/>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet"/>
  <style>
    :root { --ticker-distance: 0px; --ticker-duration: 20s; }
    html, body {
      margin:0; font-family:'Bebas Neue',sans-serif; background:#1e1e1e; color:white; box-sizing:border-box;
    }
    body {
      padding-left:10vw; padding-right:10vw;
      display:flex; flex-direction:column; align-items:center; text-align:center;
    }
    .container { width:100%; max-width:1200px; margin:0 auto; }
    img { max-width:100%; height:auto; display:block; }

    /* Desktop header: 3-column grid */
    .banner {
      position:fixed; top:0; left:0; width:100%;
      background:#1e1e1e; box-shadow:0 2px 4px rgba(0,0,0,0.4);
      z-index:1000;
    }
    .banner-content {
      display:grid;
      grid-template-columns:1fr auto 1fr;
      align-items:center;
      max-width:1200px; margin:0 auto;
      padding:12px 0; gap:8px; box-sizing:border-box;
    }
    .left-section {
      display:flex; align-items:flex-end; justify-content:flex-start; gap:8px; width:100%;
    }
    .left-section img.logo { height:48px; }
    .time-date {
      display:flex; flex-direction:column;
      font-size:13px; line-height:1.1;
      justify-content:flex-end; align-items:flex-start;
      height:48px; margin:0; text-align:left; transform:translateY(4px);
    }
    .time-date div { width:100%; text-align:left; }

    .center-section {
      display:flex; justify-content:center; width:100%; min-width:0;
    }
    .center-section form {
      width:100%; max-width:300px; display:flex; gap:6px;
    }
    .center-section input[type="text"] {
      flex:1; padding:4px 8px; font-size:15px;
      border:none; border-radius:4px; outline:none;
      height:32px; background:#fff; color:#1e1e1e; box-sizing:border-box;
    }
    .center-section button {
      padding:0 12px; font-size:15px;
      border:none; border-radius:4px; background:gold; color:#1e1e1e;
      cursor:pointer; display:flex; align-items:center; justify-content:center;
      height:32px; box-sizing:border-box;
    }

    .right-section {
      display:flex; align-items:center; justify-content:flex-end; gap:8px; width:100%;
    }
    .right-section a img {
      height:24px; transition:transform .2s; display:inline-block;
    }
    .right-section a:hover img { transform:scale(1.1); }

    /* Keep your ticker, main-content, footer styles unchanged,
       but ensure footer border is inside wrapper: */
    footer {
      background:#1e1e1e; color:white; padding:0; margin-top:20px; width:100%;
    }
    .footer-wrapper {
      max-width:1200px; margin:0 auto; box-sizing:border-box;
      border-top:1px solid #444; padding-top:20px;
    }

    /* MOBILE: override grid into two columns + search row */
    @media(max-width:768px){
      body { padding-left:0; padding-right:0; }

      .banner-content {
        display:grid;
        grid-template-columns:auto auto;
        grid-template-rows:auto auto;
        grid-template-areas:
          "left date"
          "search search";
        align-items:center;
        max-width:100vw; margin:0 auto;
        padding:8px; gap:8px; box-sizing:border-box;
      }
      .left-section   { grid-area:left; display:flex; align-items:center; gap:6px; }
      .right-section  { grid-area:date; display:flex; align-items:flex-end; justify-content:flex-end; }
      .center-section { grid-area:search; display:flex; justify-content:center; width:100%; }

      /* shrink on mobile */
      .left-section img.logo       { height:38px; }
      .right-section a img         { height:19px; }
      .center-section form         { width:100%; max-width:100%; gap:5px; }
      .center-section input[type="text"] { height:28px; font-size:14px; padding:3px 7px; }
      .center-section button              { min-width:70px; height:28px; font-size:14px; padding:0 10px; }
    }
  </style>
</head>
<body>
  <div class="banner">
    <div class="banner-content">
      <!-- LEFT: logo + date-time (will swap via JS) -->
      <div class="left-section">
        <img src="fedsun_logo_hoz.png" alt="Logo" class="logo"/>
        <div class="time-date">
          <div id="current-time">--:-- AEST</div>
          <div id="current-date">--/--/----</div>
        </div>
      </div>

      <!-- CENTER: search -->
      <div class="center-section">
        <form id="search-form" action="https://www.google.com/search" method="GET" target="_blank" autocomplete="off">
          <input type="text" id="search-input" name="q" placeholder="Search..." />
          <button type="submit">Search</button>
        </form>
      </div>

      <!-- RIGHT: icons (will swap into left on mobile) -->
      <div class="right-section">
        <a href="https://gab.com/federationsun" target="_blank" rel="noopener"><img src="icon_gab.png" alt="Gab"/></a>
        <a href="https://www.facebook.com/people/Federation-Sun/61577319796033/" target="_blank" rel="noopener"><img src="icon_facebook.png" alt="Facebook"/></a>
        <a href="https://www.instagram.com/fedsun.news/" target="_blank" rel="noopener"><img src="icon_instagram.png" alt="Instagram"/></a>
        <a href="https://t.me/federationsun" target="_blank" rel="noopener"><img src="icon_telegram.png" alt="Telegram"/></a>
        <a href="https://x.com/federationsun" target="_blank" rel="noopener"><img src="icon_x.png" alt="X"/></a>
        <a href="https://www.youtube.com/channel/UCe8DBHr28mOCBxtZuxzJ7_A" target="_blank" rel="noopener"><img src="icon_youtube.png" alt="YouTube"/></a>
      </div>
    </div>

    <!-- ticker… -->
    <div class="ticker">
      <div class="ticker-inner" id="ticker-inner">
        <div class="ticker-track" id="ticker-track">Loading headlines…</div>
      </div>
    </div>
    <div class="container">
      <div class="main-headline-container">
        <!-- your main headline HTML unchanged -->
      </div>
    </div>

    <footer>
      <div class="footer-wrapper">
        <div class="footer-content">
          <!-- your footer HTML unchanged -->
        </div>
      </div>
    </footer>

    <script>
      // 1) Clock for both desktop & mobile
      function updateTime(){
        const now = new Date();
        const tOpts = { timeZone:'Australia/Melbourne', hour:'2-digit', minute:'2-digit', hour12:false };
        const dOpts = { timeZone:'Australia/Melbourne', weekday:'short', year:'numeric', month:'2-digit', day:'2-digit' };
        const t = new Intl.DateTimeFormat('en-AU',tOpts).format(now);
        const d = new Intl.DateTimeFormat('en-AU',dOpts).format(now);
        document.querySelectorAll('#current-time').forEach(e=>e.textContent = t+' AEST');
        document.querySelectorAll('#current-date').forEach(e=>e.textContent = d);
      }
      updateTime();
      setInterval(updateTime,60000);

      // 2) Body padding under header
      function adjustBodyPadding(){
        const h=document.querySelector('.banner');
        if(h) document.body.style.paddingTop = h.offsetHeight+'px';
      }
      window.addEventListener('load',adjustBodyPadding);
      window.addEventListener('resize',adjustBodyPadding);

      // 3) Ticker logic (unchanged)
      fetch('/headlines.json')
        .then(r=>r.json())
        .then(data=>{
          const track=document.getElementById('ticker-track');
          track.innerHTML='';
          const grp=document.createElement('div');
          grp.className='ticker-group';
          data.forEach(item=>{
            const a=document.createElement('a');
            a.href=item.url;
            a.textContent=item.title;
            grp.appendChild(a);
          });
          track.appendChild(grp);
          track.appendChild(grp.cloneNode(true));
          const dist=grp.offsetWidth, speed=20, dur=dist/speed;
          document.documentElement.style.setProperty('--ticker-distance', dist+'px');
          document.documentElement.style.setProperty('--ticker-duration', dur+'s');
        })
        .catch(_=>document.getElementById('ticker-track').textContent='Failed to load headlines.');

      // 4) Site-search prefix
      document.getElementById('search-form').addEventListener('submit',e=>{
        const inp=document.getElementById('search-input');
        inp.value='site:fedsun.news '+inp.value;
      });

      // 5) On mobile: move icons & date into correct cells
      function reorderMobile(){
        if(window.innerWidth <= 768){
          const left = document.querySelector('.left-section');
          const right = document.querySelector('.right-section');
          const date = left.querySelector('.time-date');
          // move date into right-section
          if(date && right) right.appendChild(date);
          // move all icons into left-section
          Array.from(right.querySelectorAll('a')).forEach(a=> left.appendChild(a));
        }
      }
      window.addEventListener('load',reorderMobile);
      window.addEventListener('resize',reorderMobile);
    </script>
</body>
</html>
