<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Federation Sun 2025</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />
  <style>
    :root {
      --banner-height: 0px;
      --ticker-distance: 0px;
      --ticker-duration: 20s;
    }

    html, body {
      margin: 0;
      font-family: 'Bebas Neue', sans-serif;
      background-color: #1e1e1e;
      color: white;
      box-sizing: border-box;
    }
    body {
      padding-top: var(--banner-height);
      padding-left: 10vw;
      padding-right: 10vw;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      text-align: center;
    }

    /* —– BANNER & TICKER —– */
    .banner { /* same as before… */ }
    .banner-content { /* … */ }
    /* [your banner CSS remains unchanged] */

    .ticker {
      width: 100%;
      background-color: #222;
      border-top: 1px solid #444;
      border-bottom: 1px solid #444;
      overflow: hidden;
      height: 36px;
    }
    .ticker-inner {
      max-width: 1200px;
      margin: 0 auto;
      overflow: hidden;
    }
    .ticker-track {
      display: flex;
      white-space: nowrap;
      animation: scroll var(--ticker-duration) linear infinite;
    }
    .ticker-track a {
      margin-right: 50px;
      color: white;
      text-decoration: none;
      font-size: 16px;
    }
    .ticker-track a:hover { color: gold; }

    @keyframes scroll {
      from { transform: translateX(0); }
      to   { transform: translateX(calc(-1 * var(--ticker-distance))); }
    }

    /* —– MAIN HEADLINE AREA & FOOTER —– */
    /* all your existing styles for headlines and footer go here, unchanged */

    /* —– MOBILE —– */
    /* your existing @media styles remain unchanged */
  </style>
</head>
<body>
  <div class="banner" id="banner">
    <div class="banner-content">
      <!-- left, center, right sections (unchanged) -->
    </div>

    <div class="ticker">
      <div class="ticker-inner" id="ticker-inner">
        <div class="ticker-track" id="ticker-track">
          Loading headlines…
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN HEADLINE AREA (unchanged) -->

  <!-- ORIGINAL FOOTER (unchanged) -->

  <script>
    // adjust banner padding
    function adjustPadding() {
      const h = document.getElementById('banner').offsetHeight;
      document.documentElement.style.setProperty('--banner-height', h + 'px');
    }
    window.addEventListener('load', adjustPadding);
    window.addEventListener('resize', adjustPadding);

    // clock (unchanged)…
    function updateTime() {
      const now = new Date();
      document.getElementById('current-time').textContent =
        new Intl.DateTimeFormat('en-AU',{ timeZone:'Australia/Melbourne',
          hour:'2-digit',minute:'2-digit',hour12:false }).format(now) + ' AEST';
      document.getElementById('current-date').textContent =
        new Intl.DateTimeFormat('en-AU',{ timeZone:'Australia/Melbourne',
          year:'numeric',month:'2-digit',day:'2-digit' }).format(now);
    }
    updateTime();
    setInterval(updateTime,60000);

    // CSS-driven ticker
    fetch('/headlines.json')
      .then(r => r.json())
      .then(data => {
        const container = document.getElementById('ticker-inner');
        const track     = document.getElementById('ticker-track');

        // render originals
        track.innerHTML = '';
        data.forEach(item => {
          const a = document.createElement('a');
          a.href = item.url;
          a.textContent = item.title;
          track.appendChild(a);
        });

        // keep originals copy
        const originals = Array.from(track.children);

        // clone until ≥2× container width
        while (track.scrollWidth < container.offsetWidth * 2) {
          originals.forEach(orig => track.appendChild(orig.cloneNode(true)));
        }

        // measure the full loop distance & duration
        const loops       = track.children.length / data.length;
        const singleWidth = track.scrollWidth / loops;
        const speed       = 60; // px per second
        const durationSec = singleWidth / speed;

        document.documentElement.style.setProperty('--ticker-distance', singleWidth + 'px');
        document.documentElement.style.setProperty('--ticker-duration', durationSec + 's');
      })
      .catch(() => {
        document.getElementById('ticker-track').textContent = 'Failed to load headlines.';
      });
  </script>
</body>
</html>
